syntax = "v1"

// AI机器人配置
type AIBotConfig {
	ID          uint     `json:"id,optional"` // 创建时不需要
	Name        string   `json:"name"` // 机器人名称
	Provider    string   `json:"provider"` // 提供商(如deepseek, gpt等)
	FileName      string   `json:"fileName"` // 机器人头像
	Description string   `json:"description"` // 机器人描述
	MaxTokens   int      `json:"maxTokens"` // 最大token数
	Temperature float64  `json:"temperature"` // 默认温度
	IsEnabled   bool     `json:"isEnabled"` // 是否启用
	SystemMsg   string   `json:"systemMsg"` // system prompt
	WelcomeMsg  string   `json:"welcomeMsg"` // 欢迎消息
	Features    []string `json:"features"` // 支持的功能列表
	Priority    int      `json:"priority"` // 优先级，数字越大越靠前
	APIKey      string   `json:"apiKey"` // AI服务API密钥
	APIEndpoint string   `json:"apiEndpoint,optional"` // API端点，可选，默认使用官方地址
}

// 创建AI机器人请求
type CreateAIBotReq {
	Bot    AIBotConfig `json:"bot"`
	UserID string      `header:"Beaver-User-Id"`
}

// 创建AI机器人响应
type CreateAIBotRes {
	BotID string `json:"botId"`
}

// 更新AI机器人请求
type UpdateAIBotReq {
	Bot AIBotConfig `json:"bot"`
}

// 更新AI机器人响应
type UpdateAIBotRes {
}

// 删除AI机器人请求
type DeleteAIBotReq {
	BotID string `json:"botId"`
}

// 删除AI机器人响应
type DeleteAIBotRes {
}

// 获取AI机器人列表请求
type GetAIBotsReq {
	Page  int `form:"page,optional"` // 页码，可选，默认1
	Limit int `form:"limit,optional"` // 每页数量，可选，默认20
}

// 获取AI机器人列表响应
type GetAIBotsRes {
	Total int64         `json:"total"`
	Bots  []AIBotConfig `json:"bots"`
}

@server (
	group: ai
)
service backend {
	@doc "创建AI机器人"
	@handler createAIBot
	post /admin/ai/bot/create (CreateAIBotReq) returns (CreateAIBotRes)

	@doc "更新AI机器人"
	@handler updateAIBot
	post /admin/ai/bot/update (UpdateAIBotReq) returns (UpdateAIBotRes)

	@doc "删除AI机器人"
	@handler deleteAIBot
	post /admin/ai/bot/delete (DeleteAIBotReq) returns (DeleteAIBotRes)

	@doc "获取AI机器人列表"
	@handler getAIBots
	get /admin/ai/bots (GetAIBotsReq) returns (GetAIBotsRes)
}
